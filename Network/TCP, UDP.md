## TCP(Transmission Control Protocol)

TCP(전송 제어 프로토콜)는 IP와 함께 TCP/IP라는 명칭으로 널리 불린다. TCP는 패킷 사이의 순서를 보장하고 연결지향 프로토콜을 사용해서 연결을 하여 신뢰성을 구축하서 수신여부를 확인하며 `가상회선 패킷 교환 방식`을 사용한다.

가상회선 패킷 교환 방식은 각 패킷에 가상회선 식별자가 포함되며 모든 패킷을 전송하면 가상회선이 헤제되고 패킷들은 전송된 순서대로 도착하는 방식이다. TCP는 통신의 신뢰성을 확보하기 위해 통신 전 `3-웨이 핸드쉐이크(3-way handshake)`작업을 수행한다. 그리고 연결 헤제 시 `4-웨이 핸드쉐이크`작업을 수행한다.

* 3-way handshake

    3-웨이 핸드쉐이크란 클라이언트와 서버가 통신할 때 다음의 세 단계 과정을 거치게 된다.

        클라이언트는 서버에 클라이언트의 ISN을 담아 SYN을 보낸다. ISN은 새로운 TCP 연결의 첫 번째 패킷에 할당된 임의의 시퀀스 번호를 말하며 이는 장치마다 다를 수 있다.

        서버는 클라이언트의 SYN을 수신하고 서버의 ISN을 보내며 승인번호로 클라이언트의 ISN + 1을 보낸다.

        클라이언트는 서버의 ISN + 1한 값인 승인번호를 담아 ACK를 서버에 보낸다.

    위의 과정이후 신뢰성이 구축되면 데이터 전송이 시작된다.

* 4-way handshake

    4-웨이 핸드쉐이크는 다음의 과정을 통하여 TCP연결을 헤제한다.

        먼저 클라이언트가 연결을 닫으려고 할 때 FIN으로 설정된 세그먼트를 보낸다. 그리고 클라이언트는 FIN_WAIT_1 상태로 들어가고 서버의 응답을 기다린다.

        서버는 클라이언트로 ACK라는 승인 세그먼트를 보낸다. 그리고 CLOSE_WAIT 상태에 들어간다.
        클라이언트가 세그먼트를 받으면 FIN_WAIT_2 상태에 들어간다.

        서버는 ACK를 보내고 일정 시간 이후에 클라이언트에 FIN이라는 세그먼트를 보낸다.

        클라이언트는 TIME_WAIT 상태가 되고 다시 서버로 ACK를 보내서 서버는 CLOSED 상태가 된다.
        이후 클라이언트는 어느 정도의 시간을 대기한 후 연결이 닫히고 클라이언트와 서버의 모든 자원이 헤제된다.

## UDP(User Datagram Protocol)

UDP는 순서를 보장하지 않고 수신 여부를 확인하지 않으며 단순히 데이터만 주는 `데이터그램 패킷 교환 방식`을 사용한다.

데이터그램 패킷 교환 방식은 패킷이 독립적으로 이동하며 최적의 경로를 선택하여 이동한다. 하나의 메시지에서 분할된 여러 패킷은 서로 다른 경로로 전송될 수 있으며 도착하는 순서가 다를 수 있다. TCP의 안정성이 필요치 않을 경우 오버헤드가 작고 지연시간이 짧은 UDP가 사용될 수 있다.