JWT(JSON Web Token)은 JSON 객체로서 당사자 간 정보를 안전하게 전송하기 위한 토큰 기반 인증이다. 토큰은 세션과 달리 서버가 아닌 클라이언트에 저장되기 때문에 서버측에서 메모리나 스토리지 등의 부담을 덜 수 있다. JWT의 핵심적인 특징은 토큰 자체에 사용자의 권한 정보나 서비스를 사용하기 위한 정보가 포함(self-contained)되어 있다는 것이다.

JWT를 사용하면 RESTful과 같은 stateless인 환경에서 사용자 데이터를 주고 받을 수 있게 된다. 클라이언트에 저장된 토큰을 HTTP 헤더에 첨부하는 것만으로 데이터를 요청하고 응답을 받아올 수 있다.

일반적인 JWT 사용순서는 다음과 같다.

1. 클라이언트 사용자가 아이디, 패스워드를 통해 웹 서비스 인증
2. 서버에서 서명된 JWT를 생성하여 클라이언트에 응답으로 돌려주기
3. 클라이언트가 서버에 데이터를 추가적으로 요구할 때 JWT를 HTTP Header에 첨부
4. 서버에서 클라이언트로 부터 온 JWT 검증

JWT 는 JSON 데이터를 Base64 URL-safe encode를 통해 인코딩하여 직렬화한 것이 포함되며 토큰 내부에는 위변조 방지를 위해 개인키를 통한 전자서명이 있다. 따라서 사용자가 JWT를 서버로 전송하면 서버는 서명을 검증하는 과정을 거치며 검증이 완료되면 요청한 응답을 보낸다.

JWT 구조는 Header, Payload, Signature로 구성된다. 또한 각 요소는 '.'으로 구분된다. 

* Header에는 JWT에서 사용할 타입과 해시 알고리즘의 종류가 담겨있다
* Payload에는 서버에서 첨부한 사용자 권한 정보와 데이터가 담겨있다
* Signature에는 Header, Payload를 Base64 URL-safe encode를 한 이후 Header에 명시된 해시함수를 적용하고, 개인키(Private key)로 서명한 전자서명이 담겨있다

전자서명에는 비대칭 암호화 알고리즘을 사용하므로 암호화를 위한 키와 복호화를 위한 키가 다르다. 암호화에는 개인키를, 복호화에는 공개키를 사용한다.

## JWT의 장단점

* JWT는 최근 웹사이트에서 범용적으로 사용되고 있으며 규격이 정해져 있기 때문에 다양한 클라이언트에서 호환성이 뛰어나다
* Payload가 많아지면 토큰이 커져 서버에 부담이 갈 수 있다
* 토큰이 재발급되기 전까지 사용자 정보가 갱신되더라도 적용되지 않는 문제가 있다
* RESTful과 같은 stateless 환경에서의 통신이 용이하고 사용하기 쉽다
* 데이터를 자제적으로 가지고 있어서 데이터를 얻기위해 타 서비스에 다시 요청하는 획수가 줄어들어 서버에 부담이 줄어든다
* 토큰의 만료시간이 있는 경우 만료시간까지는 강제적으로 만료시킬 수 없으므로 노출이 되어서는 안되며 중요 정보를 넣는 일이 없어야한다.
