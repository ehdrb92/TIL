# 네트워크 성능 분석 명령어 정리
## ping(Packet InterNet Groper)

ping은 ip 네트워크를 통해 특정 목적지까지 네트워크가 잘 동작하고 있는지 확인하는 명령어이다.

목표는 상대방의 호스트가 살아있는지 확인하는 것이다.

이외에도 통신을 위한 경로, 즉 라우팅 경로가 정상적으로 구성되어 있는지 함께 확인할 수 있다.

`ping [옵션] 목적지_IP 주소`

### 주요 옵션
```
-c (count) | ping을 보내는 패킷(ECHO_REQUEST)을 몇 번 보내고 종료할 것인지를 지정

기본 설정은 강제로 정지(CTRL+C)할 때까지 패킷을 지속적으로 보냄

-i (interval) | 패킷을 보내는 시간 간격. 기본 설정값은 1초. 슈퍼 유저의 경우, 0.2 이하로 설정 가능

-l (interface) | 패킷을 보낼 때, 출발지 주소를 지정. 실제 IP 값을 지정하거나 인터페이스 

이름을 지정하면 출발지 주소가 변경됨. 이 옵션을 사용하지 않은 경우, 라우팅 테이블에 의해 

나가는 인터페이스(Outgoing interface)의 IP 주소가 출발지 주소가 됨

-s (packetsize) | 패킷 크기를 지정. 기본 설정값은 56바이트(8바이트의 ICMP 헤더가 추가로 붙어 64바이트를 송신)
```
## traceroute (리눅스)

traceroute는 출발지부터 통신하거나 목적지까지의 네트워크 경로를 확인할 때 사용된다.

ping으로도 이를 확인할 수 있었지만 중간 경로의 더 자세한 정보를 얻기 위해서는 해당 명령어를 사용해야 한다.

`traceroute [옵션] 목적지_IP 주소`

### 주요 옵션
```
-I, --icmp | ICMP 기반으로 traceroute 수행

-T, --tcp | TCP SYN으로 traceroute를 수행하면 기본 서비스 포트는 80

-n | IP 주소를 도메인이 아닌 숫자 형식으로 표시(도메인 리졸브 미 수행)

-p (port), --port=(port) | 특정 포트를 지정해 traceroute 수행

-s (scr_addr), --source=(scr_addr) | 패킷이 나가는 인터페이스가 아닌 별도 IP로 출발지 IP를 지정
```
## tcptraceroute

tcptraceroute는 traceroute가 중간 경로에 대한 정보는 주는 것에 반해

서비스에 문제가 생겼을 때 이에 대한 자세한 정보를 제공하는 명령어이다.

별도의 설치과정을 거친 후 사용할 수 있다. (mac의 경우 homebrew로 설치가능)

`tcptraceroute [옵션] 목적지_IP 주소 [서비스 포트]`

### 주요 옵션
```
-n | ICMP 기반으로 traceroute 확인

-s (source address) | 출발지 IP 주소를 지정

destination port | 도메인이 아닌 숫자 형식으로 IP 주소를 표시(도메인 리졸브 미 수행)
```
## netstat

netstat은 서버의 다양한 네트워크 상태를 확인하는 데 사용하는 명령어이다.

여러 가지 네트워크 관련 정보를 확인할 수 있어 사용 범위가 매우 넓지만

서비스 포트를 확인하는 용도로 많이 사용된다.

`netstat [옵션]`

### 주요 옵션
```
-a, --all | 모든 연결과 수신 대기 포트 표시

-n, --numeric | 주소와 포트 번호를 숫자 형식으로 표시

-r, --route | 라우팅 테이블 표시

-i, --interfaces | 인터페이스별 입출력 패킷 통계

-s, --statistics | 네트워크에 통계 테이터 출력

-p, --programs | PID와 프로그램 이름 출력

-t, -tcp | TCP만 출력(TCP, TCPv6)

-4/-6 | IPv4 또는 IPv6에 대해 출력
```

## ss(socket statistics)

ss는 소켓 정보를 확인할 수 있는 네트워크 명령어이다.

`ss [옵션] [필터]`

### 주요 옵션
```
-a | 화면에 전체 소켓을 표시

-l | 화면에 LISTENING 상태의 소켓만 표시

-i | 소켓에 대한 자세한 정보

-p | 현재 소켓에서 사용 중인 프로세스 표시

-n | 서비스 명이 아닌 실제 포트 번호로 서비스 포트를 표기

-4, -6, --ipv4, --ipv6 | IPv4, IPv6에 대한 소켓만 각각 화면에 표시

-s | 프로토콜별 통계 표시

-t, -u | TCP/UDP에 대한 소켓만 각각 화면에 표시
```

## nslookup(name server lookup)

nslookup은 DNS에 다양한 도메인 관련 내용을 질의해 결과값을 전송받을 수 있는 명령어이다.

```
nslookup [옵션]               # 기본 네임 서버를 사용한 대화형 모드
nslookup [옵션] - (server)    # 기본 네임 서버를 server로 지정한 대화형 모드
nslookup [옵션] host          # 기본 네임 서버를 사용한 host 질의
nslookup [옵션] host (server) # 기본 네임 서버를 server로 지정한 host 질의
```

### 옵션에 적용할 수 있는 레코드 항목
```
A | 도메인에 대한 IPv4 정보 확인

AAAA | 도메인에 대한 IPv6 정보 확인

ANY | 도메인에 대한 모든 설정 정보 확인

MX | 현재 도메인에 대한 메일 서버 설정 확인

NS | 현재 도메인에 대한 네임 서버 설정 확인

PTR | 역방향 도메인 정보 확인
```

## telnet

telnet은 원격지 호스트에 터미널 연결을 위해 사용되는 매우 오래된 표준 프로토콜이다.

다양한 telnet 프로그램을 이용해 서버에 접근해 관리하는 용도로 사용되지만

네트워크 문제 해결을 위해 특정 서버의 서비스에 대한 접근 가능성을 테스트하는데 쓰일 수 있다.

`telnet [목적지 IP 서비스 포트]`

## tcpdump

tcpdump는 네트워크 인터페이스로 오가는 패킷을 캡쳐해 보는 명령어이다.

장애 처리나 패킷 분석이 필요할 때 자주 사용하는 명령어이다.

### 주요 옵션

```
-i (intrtface) | 패킷을 캡처할 인터페이스

src (IP 주소) | 출발지 IP 주소를 지정해 필터링

dst (IP 주소) | 목적지 IP 주소를 지정해 필터링

host (IP 주소) | 출발지/목적지와 상관없이 IP 주소를 지정해 필터링

-n | 이름으로 표기되는 호스트 네임을 실제 IP 주소로 표기

-nn | 이름으로 표기되는 서비스 포트를 실제 포트 번호로 표기

src port (포트 번호) | 출발지 포트를 지정해 필터링

dst port (포트 번호) | 목적지 포트를 지정해 필터링

port (포트 번호) | 출발지/목적지와 상관없이 tcp 포트를 지정해 필터링

tcp 또는 udp | tcp 또는 udp만 필터링

-c (출력 수) | tcpdump로 출력할 결과의 개수

-w (파일명) | tcpdump의 결과를 화면에 출력하지 않고 파일명으로 저장

-r (파일명) | 파일로 지정한 tcpdump 파일을 화면에 출력
```
