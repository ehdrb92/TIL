데드락(deadlock)이란 서로가 가진 리소스를 원하는 상황에서 리소스 선점을 하지 못하여 작업이 진행되지 못하는 상황을 말한다. 데드락이 발생하게되는 조건은 아래의 4가지이다.

1. 상호 배제: 리소스를 공유해서 사용할 수 없다.
2. 점유와 대기: 프로세스가 이미 하나의 리소스를 점유한 상태에서 다른 리소스를 기다린다.
3. 비선점: 리소스의 반환은 오직 해당 리소스를 가진 프로세스만 가능하다.
4. 순환 대기: 프로세스들이 서로 순환하는 형태로 서로의 리소스를 기다린다.

그렇다면 데드락을 방지하는 방법들을 살펴보자.

1. 데드락 방지
2. 데드락 회피
3. 데드락 감지와 복구

### 데드락 방지

데드락 방지는 데드락이 발생할 수 있는 조건 4가지 중 하나가 충족되지 않도록 시스템적으로 디자인하는 방법이다.

첫 번째로 상호 배제를 방지하는 것은 현실적으로 불가능하다. 왜냐하면 보통 임계 영역을 지정하고 해당 리소스 작업을 하나의 프로세스만 가능하게 하는 것은 모두 이유가 있어 하는 행동이다. 그리고 예를 들어 프린터와 같은 경우 애초에 두 가지 작업을 실행하지 못한다. 이러한 경우들에 의해 상호 배제를 없애는 것은 불가능하다. 두 번째로 점유와 대기를 방지하여 프로세스가 작업을 실행하기위해 필요한 리소스를 모두 선점할 수 있는 상태에서만 점유하도록 하는 방법이다. 이 방법 또한 허점이 있는데 여러 개의 리소스에 대해 모두 점유를 할 수 있는 상황이 오지 않을 경우 무한히 대기하는 기아 상태가 생길 수 있다. 세 번째 비선점을 방지하는 방법으로 추가적인 리소스를 기다려야 하는 상황이라면 자신이 취득한 리소스를 다른 리소스가 선점 가능하도록 하는 방법이다. 이 방식은 이미 일부에서 사용이 되는데 운영체제가 컨텍스트 스위칭을 하는 것과 비슷하다. 특정 프로세스 혹은 스레드가 자신에게 주어진 시간을 모두 소모하며 컨텍스트 스위칭이 일어나 다른 프로세스 혹은 스레드가 CPU를 점유하여 작업을 하게 된다. 마지막으로 순환 대기를 방지하는 방법은 모든 리소스에 순서 체계를 부여하여 오름차순으로 리소스를 요청하는 것이다.

### 데드락 회피

데드락 회피는 위의 방지에서는 시스템 리벨에서 디자인하여 방지하는 반면, 실행 환경에서 추가적인 정보를 제공하여 데드락이 발생할 상황을 회피하는 것이다.

가장 대표적인 방법으롤 은행원 알고리즘이 존재한다. 이는 리소스 요청을 허락해줬을 때 데드락이 발생할 가능성이 있으면 리소스를 할당해도 안전할 때 까지 계속 요청을 거절하는 알고리즘이다.

### 데드락 감지와 복구

데드락을 허용하고 데드락이 발생하면 이를 복구하는 방식이다.

첫 번째 방법은 프로세스를 종료하는 것이다. 극단적으로 프로세스 전체를 종료시킬 수도 있고, 데드락의 원인이 되는 프로세스 중 하나씩 종료시켜 해결되는지 지켜보는 방법도 있다. 리스크가 큰 방법이지만 급박한 상황에서 사용할 수 있는 방법이다. 두 번째는 일시적으로 다른 프로세스가 가진 리소스를 선점할 수 있도록 허용해 주는 것이다.