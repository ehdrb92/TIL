가상 메모리는 메모리가 실제 메모리보다 많아 보이게 하는 기술이다. 어떤 프로세스가 실행될 때 메모리에 해당 프로세스 전체가 올라가지 않더라도 실행이 가능하다는 점에 착안하여 고안되었다.

가상 메모리는 실행에 필요한 일부분만 주 기억장치에 올리고 나머지는 보조기억장치에 둔다. 이 둘을 합쳐 마치 하나의 메모리인 것처럼 동작하게 한다.

이를 가능하게 하기위해서 MMU(Memory Management Unit)가 만들어 지게 되었다.

* MMU는 가상주소를 물리주소로 변환하고, 메모리를 보호한다.
* MMU를 사용하면, CPU는 각 메모리에 접근하기 위해 주소 번역 작업을 수행한다.
* 메모리를 일일이 가상주소에서 물리주소로 변환하여면 작업 부하가 높아지므로, MMU는 RAM을 여러 페이지로 나누어 각 페이지를 하나의 독립된 항목으로 처리한다.
* 페이지 및 주소 번역 정보를 기억하는 작업이 가상 메모리를 구현하는 데 있어 중요한 작업이다.

## 요구 페이징(demand paging)

요구 페이징은 CPU가 요청할 때 프로세스의 데이터를 메모리에 올리는 것을 의미한다. 즉, 처음부터 모든 데이터를 메모리로 적재하지는 않는다.

## 페이지 폴트(page faults)

페이지 폴트란 어떤 페이지에 접근하려고 했을 때 해당 페이지가 실제 물리 메모리에 부재할 때 뜨는 인터럽트이며, 페이지 폴트가 발생하면 운영체제가 이를 해결한 뒤 다시 동일한 명령을 수행하는 식으로 동작한다.

* 페이지 폴트란, 어떤 프로그램이 자신의 주소 공간(가상 메모리 공간)에는 존재하지만 시스템의 RAM에는 현재 존재하지 않는 데이터·코드에 접근을 시도할 경우 발생하는 현상을 의미함.
* 페이지 폴트가 발생하면 운영체제는 그 데이터를 메모리로 가져와서, 마치 페이지 폴트가 전혀 발생하지 않은 것처럼 프로그램이 계속적으로 작동하게 해줌.
* 이러한 페이지 폴트가 자주 일어날수록 운영체제의 성능이 많이 저하되기 때문에 페이지 폴트가 일어나지 않도록 하는 것이 중요함. 페이지 폴트를 최소화하기 위한 방법으로는 페이지 교체 정책(page replacement policy)이 있음.
* 메모리가 꽉 차있을 때 기존 페이지 중 하나를 물리 메모리에서 저장 매체로 내리고, 새로운 페이지를 방금 비워진 해당 물리 메모리 공간에 올림. 이때 기존 페이지 중 어떤 것을 내리면 좋을지에 대한 알고리즘을 짠 것이 바로 페이지 교체 알고리즘인 것

## 페이지 정보 캐쉬(TLB, Translation Lookaside Buffer)

TLB는 가상 메모리 주소를 물리적 주소로 변환하는 속도를 높이기 위해 사용하는 캐시로, 최근에 일어난 가상 메모리와 물리 주소의 변환 테이블을 저장해둠. CPU가 가상 주소를 가지고 메모리에 접근하려고 할 때 우선은 TLB에 접근하여 가상 주소에 해당되는 물리 주소를 찾고, 만약 TLB에 매핑이 존재하지 않는다면 MMU가 페이지 테이블에서 해당되는 물리 주소로 변환한 후 메모리에 접근하게 됨.
