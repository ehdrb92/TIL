# 부동소수점과 고정소수점

파이썬에서 실수의 타입은 **float**이다. 이는 부동소수점을 표현한 것인데, 소수에는 부동소수점 외에 고정소수점이라는 것이 존재한다. 프로그래밍 언어에서 실수는 보통 부동소수점 표현방식을 사용한다고 한다. 이 둘의 차이점에 대해 알아보자.

## 고정소수점

고정소수점의 표현방식은 소수를 정수부와 소수부로 나누고 이를 2진수로 변환한 것이다. 그리고 부호를 나타내기위한 부호비트가 존재한다.

예를들어 6.25라는 소수가 있고, 이를 고정소수점으로 표현하면 아래와 같이할 수 있다. 부호비트는 양수일 경우 0, 음수일 경우 1로 표현한다. 6.25는 양수이므로 부호비트는 0이다. 정수부는 6이다. 이를 2진수로 변환하면 110이 된다. 소수부는 0.25이며, 이를 2진수로 변환하면 010이 된다. 16비트 체계를 사용한다고 가정하면, 1비트는 부호비트, 7비트는 정수부, 8비트는 소수부가 된다.

```
부호비트 정수부    소수부
0      0000110 01000000
```

### 소수부를 2진수로 변환하는 팁

0.25 * 2 = 0.5 -> 0
0.5 * 2 = 1 -> 1
0 * 2 = 0 -> 0

위부터 차레대로 읽으면 `010` 고정소수점 방식은 구현하기 편리하지만 사용하는 비트 수 대비 표현 가능한 수의 범위 또는 정밀도가 낮기 때문에 실수를 다룰 필요가 있는 범용 시스템에서는 거의 안 쓰이고, 높은 정밀도가 필요없는 소규모 시스템에서는 간혹 쓰인다.

## 부동소수점

부동소수점은 고정소수점에 비해 조금은 복잡하다. 먼저 실수를 정규화 한 뒤 이를 부호비트, 지수부, 가수부로 나누어 표현한다. 똑같이 6.25를 이번에는 부동소수점으로 표현해보자. 일단 10진수를 2진수로 변환하면, 110.01이 된다.

이를 정규화 해야한다. 정규화는 2진수의 맨 앞 1을 제외하고 모두 소수로 만들어 주는 것이다. 그러면, 1.1001이 되는데 2칸을 왼쪽으로 이동시켜 주었으므로 `* 2^2`를 해준다. 결과적으로 `1.1001 * 2^2`가 된다.

이제 이를 지수부와 가수부로 나누어 준다. 부동소수점 표현방식으로 저장하는데는 IEEE 754라는 표준에 따르게 된다. 실수로 저장하는데는 32, 64비트가 사용되며 여기서는 32비트를 사용해보겠다.32비트에서 1비트는 부호비트, 8비트는 지수부, 23비트는 가수부가 된다. 결과적으로 아래와 같이 바뀐다.

```
부호비트 지수부     가수부
0      10000001 10010000000000000000000
```

여기서 가수부는 따로 계산해주어야 하는데, 원래 지수부는 2를 2진수로 표현하는게 맞다. 하지만 여기서는 bias를 더하고, 2진수로 변환해야 한다. 표준에 따르면 32비트에서 bias는 127이다. 그러므로 127 + 2 = 129(64비트 체계에서는 지수부가 11비트, 가수부가 52비트다.)

이를 2진수로 변환하면 10000001이 된다. 32비트 체계를 32비트 단정도(Single-Precision), 64비트 체계를 64비트 배정도(Double-Precision)라고 한다. 부동소수점 표현 방식은 위에서 살펴본 고정소수점 표현 방식에 비해서 비트 수 대비 표현 가능한 수의 범위와 정밀도 측면에서 보다 우위에 있기 때문에, 정규화니 bias니 하는 복잡한 과정이 **들어감에도** 불구하고 현재 대부분의 컴퓨터 시스템에서 부동소수점을 이용해 실수를 표현하고 있다.
